{% extends "base_accounts.html" %}
{% block content %}

<div class="card-body d-flex align-items-center flex-column">
  <h2 class="card-title m-3"><p>Bem-vindo, {{ request.user.nome }}!</p></h2>

  {% if request.user.is_authenticated %}
    <h3>Meu Perfil</h2>

    <!-- Formulário de edição de perfil -->
    <h3>Meu Perfil</h3>
    <form method="post" class="w-75">
      {% csrf_token %}
      {{ profile_form.non_field_errors }}

      <div>
        <label>Foto</label>
        {{ profile_form.profile_picture }}
      </div>

      <div>
        <label>Email:</label>
        {{ profile_form.email }}
      </div>
      

      <div>
        <label>Nome:</label>
        {{ profile_form.nome }}
      </div>

      <div>
        <label>Sobrenome:</label>
        {{ profile_form.sobrenome }}
      </div>

      <div>
        <label>Celular:</label>
        {{ profile_form.num_celular }}
      </div>

      <div class="d-flex justify-content-center mt-3 mb-5">
        <button type="submit" name="submit_perfil" class="btn btn-success">Salvar</button>
      </div>
    </form>

    <!-- Formulário de edição de perfil de professor-->
    {% if request.user.tipo == "professor" %}
    <h3 class="mt-4">Perfil de Professor</h3>
    <form method="post" class="w-75">
      {% csrf_token %}
      {{ professor_form.non_field_errors }}

      <div>
        <label>Formação:</label>
        {{ professor_form.formacao }}
        {{ professor_form.formacao.errors }}
      </div>

      <div>
        <label>Apresentação:</label>
        {{ professor_form.apresentacao }}
        {{ professor_form.apresentacao.errors }}
      </div>

      <div>
        <label>Valor por Hora:</label>
        {{ professor_form.valor_hora }}
        {{ professor_form.valor_hora.errors }}
      </div>

      <div>
        <label>Áreas de Conhecimento:</label>
        {{ professor_form.areas_conhecimento }}
        {{ professor_form.areas_conhecimento.errors }}
      </div>

      <div class="d-flex justify-content-center mt-3 mb-5">
        <button type="submit" name="submit_perfil_professor" class="btn btn-success">Salvar Perfil de Professor</button>
      </div>
    </form>
    {% endif %}

    <!-- Formulário de alteração de senha -->
    <h3>Alterar Senha</h3>
    <form method="post" class="w-75">
      {% csrf_token %}
      {{ password_form.non_field_errors }}

      <div>
        <label>Senha atual:</label>
        {{ password_form.old_password }}
        {{ password_form.old_password.errors }}
      </div>

      <div>
        <label>Nova senha:</label>
        {{ password_form.new_password1 }}
        {{ password_form.new_password1.errors }}
      </div>

      <div>
        <label>Confirme a nova senha:</label>
        {{ password_form.new_password2 }}
        {{ password_form.new_password2.errors }}
      </div>

      <div class="d-flex justify-content-center mt-3 mb-5">
        <button type="submit" name="submit_senha" class="btn btn-success">Salvar</button>
      </div>
    </form>

    
  {% else %}
    <p>Você não está logado.</p>
  {% endif %}
</div>

{% endblock %}